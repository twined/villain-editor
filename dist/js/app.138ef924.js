(function(t){function e(e){for(var o,i,s=e[0],c=e[1],r=e[2],u=0,p=[];u<s.length;u++)i=s[u],l[i]&&p.push(l[i][0]),l[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);d&&d(e);while(p.length)p.shift()();return n.push.apply(n,r||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],o=!0,s=1;s<a.length;s++){var c=a[s];0!==l[c]&&(o=!1)}o&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var o={},l={1:0},n=[];function i(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=o,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(a,o,function(e){return t[e]}.bind(null,o));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var r=0;r<s.length;r++)e(s[r]);var d=c;n.push([6,0]),a()})({6:function(t,e,a){t.exports=a("Vtdi")},EDI0:function(t,e,a){},QCTb:function(t,e,a){"use strict";var o=a("cF3u"),l=a.n(o);l.a},Vtdi:function(t,e,a){"use strict";a.r(e);a("VRzm");var o=a("Kw5r"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("VillainEditor",{attrs:{json:t.json}})],1)},n=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"villain-editor"},[a("div",{staticClass:"villain-editor-toolbar"},[a("i",{staticClass:"fa mr-2 fa-info-circle"}),t._v('\n    Trykk på "+" under for å legge til innholdsblokk!\n    '),a("div",{staticClass:"src float-right",on:{click:function(e){t.toggleSource()}}},[a("i",{staticClass:"fa fa-code"})])]),t.showSource?[a("div",{staticClass:"villain-editor-source"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.src,expression:"src"}],ref:"tasource",domProps:{value:t.src},on:{input:function(e){e.target.composing||(t.src=e.target.value)}}}),a("button",{staticClass:"btn btn-primary",on:{click:t.updateSource}},[t._v("\n        Oppdatér\n      ")])])]:[t.blocks&&t.blocks.length?a("BlockContainer",{attrs:{blocks:t.blocks},on:{add:function(e){t.addBlock(e)},delete:t.deleteBlock,order:t.orderBlocks}}):a("BlockContainer",{attrs:{blocks:t.blocks},on:{add:function(e){t.addBlock(e)},delete:t.deleteBlock}})]],2)},s=[],c=(a("rE2o"),a("ioFf"),a("rGqo"),a("yt8O"),a("RW0V"),a("dRSK"),a("a1Th"),a("yT7P")),r=a("iv4g"),d=a("GemG"),u=a.n(d),p=a("BkRI"),m=a.n(p),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"villain-editor-plus"},[a("transition",{attrs:{name:"fade-fast",mode:"out-in"}},[t.active?a("div",{key:"blocks",staticClass:"villain-editor-plus-available-blocks"},[t._l(t.availableBlocks,function(e){return a("div",{staticClass:"villain-editor-plus-available-block",on:{click:function(a){t.addBlock(e)}}},[a("div",[a("i",{staticClass:"fa fa-fw",class:e.icon})]),a("div",{staticClass:"villain-editor-plus-available-block-text"},[t._v("\n          "+t._s(e.name)+"\n        ")])])}),a("div",{staticClass:"villain-editor-plus-close",on:{click:function(e){t.active=!1}}},[a("i",{staticClass:"fa fa-fw fa-times-circle"})])],2):a("div",{key:"plus",staticClass:"villain-editor-plus-inactive"},[a("a",{on:{click:function(e){t.active=!0}}},[t._v("\n        +\n      ")])])])],1)},v=[];function b(){return(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase()}var k={name:"villain-plus",props:{parent:{type:String,default:null},after:{type:String,default:null},availableBlocks:{type:Array,default:function(){return[{name:"Tekst",icon:"fa-paragraph",component:"Text",dataTemplate:{text:"",type:"paragraph"}},{name:"Overskrift",icon:"fa-heading",component:"Header",dataTemplate:{text:"Overskrift",level:1,class:""}},{name:"Skillelinje",icon:"fa-minus",component:"Divider",dataTemplate:{text:"-------------"}},{name:"Bilde",icon:"fa-image",component:"Image",dataTemplate:{url:"",sizes:null,title:"",credits:"",class:"img-fluid"}},{name:"Video",icon:"fa-video",component:"Video",dataTemplate:{source:"youtube",remote_id:""}},{name:"Kart",icon:"fa-compass",component:"Map",dataTemplate:{source:"gmaps",embed_url:""}},{name:"Sitat",icon:"fa-quote-right",component:"Blockquote",dataTemplate:{text:"Sitat",cite:"Sitatforfatter"}},{name:"Tidslinje",icon:"fa-clock",component:"Timeline",dataTemplate:[{caption:"2018",text:"Tekst om hendelsen"}]},{name:"Kolonner",icon:"fa-columns",component:"Columns",dataTemplate:[]},{name:"Markdown",icon:"fa-code",component:"Markdown",dataTemplate:{text:"## Markdown code"}}]}}},data:function(){return{active:!1}},created:function(){console.debug("<VillainPlus /> created")},methods:{addBlock:function(t){var e=Object(c["a"])({},t,{uid:b()});this.active=!1,this.$emit("add",{block:e,after:this.after,parent:this.parent})}}},h=k,g=a("KHd+"),C=Object(g["a"])(h,f,v,!1,null,null,null),w=C.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.blocks.length?a("div",[a("div",{staticClass:"villain-block-wrapper"},[a("VillainPlus",{on:{add:function(e){t.$emit("add",e)}}})],1),a("draggable",{attrs:{options:{handle:".villain-move"}},model:{value:t.cBlocks,callback:function(e){t.cBlocks=e},expression:"cBlocks"}},t._l(t.cBlocks,function(e,o){return a("div",{key:e.uid,staticClass:"villain-block-container"},[a("transition",{attrs:{name:"fade",appear:""}},[a(e.type+"Block",{tag:"component",attrs:{block:e},on:{add:function(e){t.$emit("add",e)},delete:function(e){t.$emit("delete",e)}}})],1)],1)}))],1):a("div",[a("div",{staticClass:"villain-block-wrapper"},[a("VillainPlus",{on:{add:function(e){t.$emit("add",e)}}})],1)])},x=[],_=a("FRYs"),B=a.n(_),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{attrs:{block:t.block,parent:t.parent},on:{add:function(e){t.$emit("add",e)},delete:function(e){t.$emit("delete",e)}}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.block.data.text,expression:"block.data.text"}],staticClass:"villain-blockquote-content",domProps:{value:t.block.data.text},on:{input:function(e){e.target.composing||t.$set(t.block.data,"text",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.cite,expression:"block.data.cite"}],staticClass:"villain-blockquote-cite",domProps:{value:t.block.data.cite},on:{input:function(e){e.target.composing||t.$set(t.block.data,"cite",e.target.value)}}}),a("template",{slot:"config"},[a("div",{staticClass:"form-group"},[a("label",[t._v("CSS klasser")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.class,expression:"block.data.class"}],staticClass:"form-control",attrs:{type:"input"},domProps:{value:t.block.data.class},on:{input:function(e){e.target.composing||t.$set(t.block.data,"class",e.target.value)}}})])])],2)},j=[],S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"villain-block-wrapper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showConfig,expression:"!showConfig"}],staticClass:"villain-block"},[t._t("default"),a("div",{staticClass:"villain-block-actions"},[t._m(0),t.hasConfigSlot?a("div",{staticClass:"villain-block-action villain-config",on:{click:t.configBlock}},[a("i",{staticClass:"fa fa-fw fa-cog"})]):t._e(),a("div",{staticClass:"villain-block-action villain-delete",on:{click:t.deleteBlock}},[a("i",{staticClass:"fa fa-fw fa-trash-alt"})])])],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showConfig,expression:"showConfig"}],staticClass:"villain-block villain-block-config"},[a("div",{staticClass:"villain-block-config-content"},[a("h5",[t._v("Blokkoppsett →")]),t.icon?a("div",{staticClass:"display-icon"},[a("i",{staticClass:"fa fa-fw",class:t.icon})]):t._e(),t._t("config"),a("div",{staticClass:"villain-config-content-buttons"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){t.showConfig=!1}}},[t._v("\n          OK\n        ")])]),a("div",{staticClass:"villain-block-actions"},[t._m(1),t.hasConfigSlot?a("div",{staticClass:"villain-block-action villain-config",on:{click:function(e){t.showConfig=!1}}},[a("i",{staticClass:"fa fa-fw fa-cog"})]):t._e(),a("div",{staticClass:"villain-block-action villain-delete",on:{click:t.deleteBlock}},[a("i",{staticClass:"fa fa-fw fa-trash-alt"})])])],2)]),a("VillainPlus",{attrs:{after:t.block.uid,parent:t.parent},on:{add:function(e){t.$emit("add",e)}}})],1)},$=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"villain-block-action villain-move"},[a("i",{staticClass:"fa fa-fw fa-expand-arrows-alt"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"villain-block-action villain-move"},[a("i",{staticClass:"fa fa-fw fa-expand-arrows-alt"})])}],P={components:{VillainPlus:w},data:function(){return{showConfig:!1}},props:{block:{type:Object,default:function(){}},parent:{type:String,default:null},config:{type:Boolean,default:!1},icon:{type:String,default:""},showOk:{type:Boolean,default:!1}},computed:{hasConfigSlot:function(){return this.$slots.hasOwnProperty("config")}},watch:{config:function(t){this.showConfig=t}},created:function(){this.config&&(this.showConfig=!0)},methods:{configBlock:function(){this.showConfig=!0},deleteBlock:function(){this.$emit("delete",this.block)}}},I=P,T=Object(g["a"])(I,S,$,!1,null,null,null),U=T.exports,E={name:"blockquote-block",components:{Block:U},data:function(){return{customClass:"",uid:null}},props:{block:{type:Object,default:function(){}},parent:{type:String,default:null}},created:function(){console.debug("<BlockquoteBlock /> created"),console.log(this.block)}},N=E,D=Object(g["a"])(N,O,j,!1,null,null,null),R=D.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{attrs:{block:t.block,parent:t.block.uid,config:t.showConfig},on:{add:function(e){t.$emit("add",e)},delete:function(e){t.$emit("delete",e)}}},[a("div",{staticClass:"row"},t._l(t.block.data,function(e){return a("div",{class:e.class},[e.data.length?a("div",[a("div",{staticClass:"villain-block-container"},[a("div",{staticClass:"villain-block-wrapper"},[a("VillainPlus",{attrs:{parent:e.uid},on:{add:function(e){t.$emit("add",e)}}})],1)]),t._l(e.data,function(o){return a("div",{staticClass:"villain-block-container"},[a(o.type+"Block",{tag:"component",attrs:{block:o,parent:e.uid,after:o.uid},on:{add:function(e){t.$emit("add",e)},delete:function(e){t.$emit("delete",e)}}})],1)})],2):a("div",[a("div",{staticClass:"villain-block-container"},[a("div",{staticClass:"villain-block-wrapper"},[a("VillainPlus",{attrs:{parent:e.uid},on:{add:function(e){t.$emit("add",e)}}})],1)])])])})),a("template",{slot:"config"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Antall kolonner")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.columnCount,expression:"columnCount"}],staticClass:"form-control",attrs:{type:"input"},domProps:{value:t.columnCount},on:{input:function(e){e.target.composing||(t.columnCount=e.target.value)}}}),a("div",{staticClass:"text-center mt-3"},[a("button",{staticClass:"btn btn-primary",on:{click:t.updateColumns}},[t._v("\n          Sett kolonneantall (overskriver nåværende kolonner!)\n        ")])])])])],2)},M=[],q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{attrs:{block:t.block,parent:t.parent},on:{add:function(e){t.$emit("add",e)},delete:function(e){t.$emit("delete",e)}}},[a("div",{staticClass:"villain-block-divider"},[a("hr")])])},H=[],V={name:"divider-block",components:{Block:U},data:function(){return{uid:null}},props:{block:{type:Object,default:function(){}},parent:{type:String,default:null}},created:function(){console.debug("<DividerBlock /> created")}},F=V,z=Object(g["a"])(F,q,H,!1,null,null,null),K=z.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{attrs:{block:t.block,parent:t.parent},on:{add:function(e){t.$emit("add",e)},delete:function(e){t.$emit("delete",e)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.text,expression:"block.data.text"}],staticClass:"villain-header-input",style:"font-size: "+t.fontSize+"rem",domProps:{value:t.block.data.text},on:{input:function(e){e.target.composing||t.$set(t.block.data,"text",e.target.value)}}}),a("template",{slot:"config"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Størrelse")]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.level,expression:"block.data.level"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1"},domProps:{checked:t._q(t.block.data.level,"1")},on:{change:function(e){t.$set(t.block.data,"level","1")}}}),a("label",{staticClass:"form-check-label"},[t._v("\n          H1\n        ")])]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.level,expression:"block.data.level"}],staticClass:"form-check-input",attrs:{type:"radio",value:"2"},domProps:{checked:t._q(t.block.data.level,"2")},on:{change:function(e){t.$set(t.block.data,"level","2")}}}),a("label",{staticClass:"form-check-label"},[t._v("\n          H2\n        ")])]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.level,expression:"block.data.level"}],staticClass:"form-check-input",attrs:{type:"radio",value:"3"},domProps:{checked:t._q(t.block.data.level,"3")},on:{change:function(e){t.$set(t.block.data,"level","3")}}}),a("label",{staticClass:"form-check-label"},[t._v("\n          H3\n        ")])]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.level,expression:"block.data.level"}],staticClass:"form-check-input",attrs:{type:"radio",value:"4"},domProps:{checked:t._q(t.block.data.level,"4")},on:{change:function(e){t.$set(t.block.data,"level","4")}}}),a("label",{staticClass:"form-check-label"},[t._v("\n          H4\n        ")])]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.level,expression:"block.data.level"}],staticClass:"form-check-input",attrs:{type:"radio",value:"5"},domProps:{checked:t._q(t.block.data.level,"5")},on:{change:function(e){t.$set(t.block.data,"level","5")}}}),a("label",{staticClass:"form-check-label"},[t._v("\n          H5\n        ")])]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.level,expression:"block.data.level"}],staticClass:"form-check-input",attrs:{type:"radio",value:"6"},domProps:{checked:t._q(t.block.data.level,"6")},on:{change:function(e){t.$set(t.block.data,"level","6")}}}),a("label",{staticClass:"form-check-label"},[t._v("\n          H6\n        ")])])]),a("div",{staticClass:"form-group"},[a("label",[t._v("CSS klasser")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.class,expression:"block.data.class"}],staticClass:"form-control",attrs:{type:"input"},domProps:{value:t.block.data.class},on:{input:function(e){e.target.composing||t.$set(t.block.data,"class",e.target.value)}}})])])],2)},J=[],G={name:"header-block",components:{Block:U},data:function(){return{customClass:"",uid:null}},props:{block:{type:Object,default:function(){}},parent:{type:String,default:null}},computed:{fontSize:function(){var t=parseInt(this.block.data.level);switch(t){case 1:return 4;case 2:return 3;case 3:return 2;case 4:return 1.5;case 5:return 1;case 6:return.75}}},created:function(){console.debug("<HeaderBlock /> created")}},X=G,Y=(a("t8tj"),Object(g["a"])(X,A,J,!1,null,null,null)),Z=Y.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{attrs:{block:t.block,parent:t.parent,config:t.showConfig},on:{add:function(e){t.$emit("add",e)},delete:function(e){t.$emit("delete",e)}}},[a("div",{staticClass:"villain-block-image"},[t.block.data.url?a("img",{staticClass:"img-fluid",attrs:{src:t.block.data.url}}):a("p",[t._v("\n      Inget gyldig bilde\n    ")])]),a("template",{slot:"config"},[t.showImages||t.block.data.url?t._e():a("div",[a("div",{staticClass:"display-icon"},[a("drop",{staticClass:"drop",on:{dragover:function(e){t.dragOver=!0},dragleave:function(e){t.dragOver=!1},drop:t.handleDrop}},[t.dragOver?a("i",{staticClass:"fa fa-fw fa-cloud-upload-alt"}):[t.uploading?a("i",{staticClass:"fa fa-fw fa-circle-notch fa-spin"}):a("i",{staticClass:"fa fa-fw fa-image"})]],2)],1),a("p",{staticClass:"text-center"},[t.dragOver?[t._v("\n          Slipp for å laste opp!\n        ")]:[t.uploading?[t._v("\n            Laster opp ...\n          ")]:[t._v("\n            Dra bildet du vil laste opp hit ↑\n          ")]]],2)]),t.showImages?a("div",{staticClass:"villain-image-library row mt-4"},t._l(t.images,function(e){return a("div",{staticClass:"col-4"},[a("img",{staticClass:"img-fluid",attrs:{src:e.thumb},on:{click:function(a){t.selectImage(e)}}})])})):a("div",[t.block.data.url?a("div",{staticClass:"form-group"},[a("label",[t._v("Kilde")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.url,expression:"block.data.url"}],staticClass:"form-control",attrs:{type:"input"},domProps:{value:t.block.data.url},on:{input:function(e){e.target.composing||t.$set(t.block.data,"url",e.target.value)}}})]):t._e(),t.block.data.url?a("div",{staticClass:"form-group"},[a("label",[t._v("Tittel")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.title,expression:"block.data.title"}],staticClass:"form-control",attrs:{type:"input"},domProps:{value:t.block.data.title},on:{input:function(e){e.target.composing||t.$set(t.block.data,"title",e.target.value)}}})]):t._e(),t.block.data.url?a("div",{staticClass:"form-group"},[a("label",[t._v("Krediteringer")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.credits,expression:"block.data.credits"}],staticClass:"form-control",attrs:{type:"input"},domProps:{value:t.block.data.credits},on:{input:function(e){e.target.composing||t.$set(t.block.data,"credits",e.target.value)}}})]):t._e(),t.block.data.sizes?a("div",{staticClass:"form-group"},[a("label",[t._v("Størrelse")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.block.data.url,expression:"block.data.url"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.block.data,"url",e.target.multiple?a:a[0])}}},[a("option",{domProps:{value:t.originalUrl}},[t._v("\n            orginal\n          ")]),t._l(t.block.data.sizes,function(e,o){return a("option",{domProps:{value:e}},[t._v("\n            "+t._s(o)+"\n          ")])})],2)]):t._e(),t.block.data.url?a("div",{staticClass:"form-group"},[a("label",[t._v("CSS klasser")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.class,expression:"block.data.class"}],staticClass:"form-control",attrs:{type:"input"},domProps:{value:t.block.data.class},on:{input:function(e){e.target.composing||t.$set(t.block.data,"class",e.target.value)}}})]):t._e(),a("div",{staticClass:"villain-config-content-buttons"},[a("button",{staticClass:"btn btn-primary",on:{click:t.getImages}},[t._v("\n          Velg bilde fra bildebibliotek\n        ")])])])])],2)},W=[],tt=(a("f3/d"),a("ls82"),a("MECJ")),et=a("33YK"),at=a("MI2E"),ot=a.n(at),lt=a("337R"),nt=a.n(lt);function it(t,e,a){a||(a=function(){}),ot.a.dialog.open({unsafeMessage:'\n      <div class="text-center text-danger text-lg">\n        <i class="fa fa-exclamation-circle fa-5x"></i>\n      </div>\n      <div class="text-center text-lg mt-3 mb-3 dialog-title">\n        <strong>'.concat(t,'</strong>\n      </div>\n      <div class="text-center">\n        ').concat(e,"\n      </div>\n    "),buttons:[ot.a.dialog.buttons.YES],callback:a})}ot.a.registerPlugin(nt.a),ot.a.defaultOptions.className="vex-theme-kurtz";var st={name:"image-block",components:{Block:U,Drop:et["Drop"]},computed:{browseURL:function(){return this.vBrowseURL+this.vImageSeries},uploadURL:function(){return"".concat(this.vBaseURL,"upload/").concat(this.vImageSeries)}},data:function(){return{customClass:"",uid:null,showConfig:!1,showImages:!1,showUpload:!1,images:[],originalUrl:"",dragOver:!1,uploading:!1}},inject:["vBaseURL","vBrowseURL","vImageSeries","vExtraHeaders"],props:{block:{type:Object,default:function(){}},parent:{type:String,default:null}},created:function(){console.debug("<ImageBlock /> created"),console.log(this.browseURL),this.block.data.url||(this.showConfig=!0)},methods:{createUID:function(){return(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase()},getImages:function(){var t=Object(tt["a"])(regeneratorRuntime.mark(function t(){var e,a,o,l,n,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=new Headers,a.append("accept","application/json, text/javascript, */*; q=0.01"),this.vExtraHeaders)for(o=Object.keys(this.vExtraHeaders),l=0;l<o.length;l++)n=o[l],a.append(n,this.vExtraHeaders[n]);return e=new Request(this.browseURL,{headers:a}),t.prev=4,t.next=7,fetch(e);case 7:return i=t.sent,t.next=10,i.json();case 10:s=t.sent,s.images.length?(this.images=s.images,this.showImages=!0):it("Feil","Fant ingen bilder i biblioteket. Last opp et i stedet!"),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](4),console.log(t.t0);case 17:case"end":return t.stop()}},t,this,[[4,14]])}));return function(){return t.apply(this,arguments)}}(),selectImage:function(t){this.showImages=!1,this.block.data.sizes=t.sizes,this.block.data.credits=t.credits,this.block.data.title=t.title,this.block.data.url=t.src,this.originalUrl=t.src,this.showConfig=!1},handleDrop:function(t,e){e.preventDefault();var a=e.dataTransfer.files;if(a.length>1)return it("OBS",'Du kan kun laste opp et bilde av gangen her. For å laste opp mange i en sleng, bruk "Bilder"-modulen i admin!'),this.dragOver=!1,!1;var o=a.item(0);this.upload(o)},upload:function(){var t=Object(tt["a"])(regeneratorRuntime.mark(function t(e){var a,o,l,n,i,s,c,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e),o=new Headers,o.append("accept","application/json, text/javascript, */*; q=0.01"),this.vExtraHeaders)for(l=Object.keys(this.vExtraHeaders),n=0;n<l.length;n++)i=l[n],o.append(i,this.vExtraHeaders[i]);return s=new FormData,s.append("image",e),s.append("name",e.name),s.append("uid",this.createUID()),a=new Request(this.uploadURL,{headers:o,method:"post",body:s}),t.prev=9,console.log("uploading true"),this.dragOver=!1,this.uploading=!0,t.next=15,fetch(a);case 15:return c=t.sent,t.next=18,c.json();case 18:r=t.sent,200===r.status?(this.showImages=!1,this.uploading=!1,console.log("uploading false"),this.block.data.sizes=r.image.sizes,this.block.data.credits="",this.block.data.title="",this.block.data.url=r.image.src,this.originalUrl=r.image.src,this.showConfig=!1):(this.uploading=!1,it("Feil","Feil ved opplasting :(")),t.next=26;break;case 22:t.prev=22,t.t0=t["catch"](9),this.uploading=!1,it("Feil","Feil ved opplasting :(",t.t0);case 26:case"end":return t.stop()}},t,this,[[9,22]])}));return function(e){return t.apply(this,arguments)}}()}},ct=st,rt=Object(g["a"])(ct,Q,W,!1,null,null,null),dt=rt.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{attrs:{block:t.block,parent:t.parent,config:t.showConfig,icon:"fa-compass"},on:{add:function(e){t.$emit("add",e)},delete:function(e){t.$emit("delete",e)}}},[a("div",{staticClass:"villain-block-video"},[t.html?a("div",{staticClass:"villain-block-video-content",domProps:{innerHTML:t._s(t.html)}}):a("p",[t._v("\n      Inget gyldig kart\n    ")])]),a("template",{slot:"config"},[a("div",{staticClass:"form-group"},[a("p",[t._v("\n        Lim inn embed-link fra Google Maps\n      ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"form-control",attrs:{type:"input"},domProps:{value:t.url},on:{input:[function(e){e.target.composing||(t.url=e.target.value)},t.parseUrl]}})]),t.block.data.url?a("div",{staticClass:"form-group"},[a("label",[t._v("CSS klasser")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.class,expression:"block.data.class"}],staticClass:"form-control",attrs:{type:"input"},domProps:{value:t.block.data.class},on:{input:function(e){e.target.composing||t.$set(t.block.data,"class",e.target.value)}}})]):t._e()])],2)},pt=[],mt=(a("pIFo"),{name:"image-block",components:{Block:U},data:function(){return{customClass:"",uid:null,showConfig:!1,url:"",html:"",providers:{gmaps:{regex:/<iframe(?:.*)src="(.*?)"/,html:'\n            <iframe src="{{protocol}}{{embed_url}}"\n                    width="600"\n                    height="450"\n                    frameborder="0"\n                    style="border:0"\n                    allowfullscreen></iframe>'}}}},props:{block:{type:Object,default:function(){}},parent:{type:String,default:null}},created:function(){console.debug("<MapBlock /> created"),this.block.data.embed_url?this.populateMap():this.showConfig=!0},methods:{parseUrl:function(t){for(var e,a=t.srcElement.value,o=Object.keys(this.providers),l=0;l<o.length;l++){var n=o[l],i=this.providers[n];e=i.regex.exec(a),null!==e&&void 0!==e[1]&&(this.block.data.source=n,this.block.data.embed_url=e[1].replace("http:","").replace("https:",""))}this.populateMap()},populateMap:function(){if(!{}.hasOwnProperty.call(this.providers,this.block.data.source))return!1;this.html=this.providers[this.block.data.source].html.replace("{{protocol}}",window.location.protocol).replace("{{embed_url}}",this.block.data.embed_url)}}}),ft=mt,vt=Object(g["a"])(ft,ut,pt,!1,null,null,null),bt=vt.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{attrs:{block:t.block,parent:t.parent},on:{add:function(e){t.$emit("add",e)},delete:function(e){t.$emit("delete",e)}}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.block.data.text,expression:"block.data.text"}],ref:"txt",staticClass:"villain-markdown-input",domProps:{value:t.block.data.text},on:{input:function(e){e.target.composing||t.$set(t.block.data,"text",e.target.value)}}}),a("template",{slot:"config"},[t._v("\n    This is the config contents!\n  ")])],2)},ht=[],gt={name:"markdown-block",components:{Block:U},props:{block:{type:Object,default:function(){}},parent:{type:String,default:null}},data:function(){return{}},created:function(){console.debug("<MarkdownBlock /> created")},mounted:function(){u()(this.$refs.txt)}},Ct=gt,wt=(a("X6qI"),Object(g["a"])(Ct,kt,ht,!1,null,null,null)),yt=wt.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{attrs:{block:t.block,parent:t.parent,icon:"fa-paragraph"},on:{add:function(e){t.$emit("add",e)},delete:function(e){t.$emit("delete",e)}}},[a("quill-editor",{class:t.block.data.type,attrs:{options:t.quillOptions},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),a("template",{slot:"config"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.type,expression:"block.data.type"}],staticClass:"form-check-input",attrs:{type:"radio",value:"paragraph"},domProps:{checked:t._q(t.block.data.type,"paragraph")},on:{change:function(e){t.$set(t.block.data,"type","paragraph")}}}),a("label",{staticClass:"form-check-label"},[t._v("\n        Paragraf/brødtekst\n      ")])]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.type,expression:"block.data.type"}],staticClass:"form-check-input",attrs:{type:"radio",value:"lead"},domProps:{checked:t._q(t.block.data.type,"lead")},on:{change:function(e){t.$set(t.block.data,"type","lead")}}}),a("label",{staticClass:"form-check-label"},[t._v("\n        Ingress\n      ")])]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.type,expression:"block.data.type"}],staticClass:"form-check-input",attrs:{type:"radio"},domProps:{value:t.customClass,checked:t._q(t.block.data.type,t.customClass)},on:{change:function(e){t.$set(t.block.data,"type",t.customClass)}}}),a("label",{staticClass:"form-check-label"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.customClass,expression:"customClass"}],staticClass:"form-control",attrs:{type:"input"},domProps:{value:t.customClass},on:{input:function(e){e.target.composing||(t.customClass=e.target.value)}}})])])])])],2)},_t=[],Bt=(a("p1OT"),a("gJae"),a("lT11")),Ot=a("1M3H"),jt=a.n(Ot),St=new jt.a({html:!0}),$t={name:"text-block",components:{Block:U,quillEditor:Bt["quillEditor"]},data:function(){return{customClass:"",quillOptions:{placeholder:"Tekst her",modules:{toolbar:[["bold","italic"],[{list:"ordered"},{list:"bullet"}],["link"]]}}}},computed:{text:{get:function(){return this.block.data.text},set:function(t){return this.block.data.text=t,this.block.data.text}}},props:{block:{type:Object,default:function(){}},parent:{type:String,default:null}},created:function(){console.debug("<TextBlock /> created --",this.block.uid),this.text=St.render(this.block.data.text),this.customClass=this.block.data.type}},Pt=$t,It=Object(g["a"])(Pt,xt,_t,!1,null,null,null),Tt=It.exports,Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{attrs:{block:t.block,parent:t.parent,config:t.showConfig,"show-ok":!0,icon:"fa-video"},on:{add:function(e){t.$emit("add",e)},delete:function(e){t.$emit("delete",e)}}},[a("div",{staticClass:"villain-block-video"},[t.html?a("div",{staticClass:"villain-block-video-content",domProps:{innerHTML:t._s(t.html)}}):a("p",[t._v("\n      Ingen gyldig video\n    ")])]),a("template",{slot:"config"},[a("div",{staticClass:"form-group"},[a("p",[t._v("\n        Lim inn link til youtube eller vimeo. "),a("br"),t._v("\n        F.eks "),a("strong",[t._v("http://www.youtube.com/watch?v=jlbunmCbTBA")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"form-control",attrs:{type:"input"},domProps:{value:t.url},on:{input:[function(e){e.target.composing||(t.url=e.target.value)},t.parseUrl]}})]),t.block.data.url?a("div",{staticClass:"form-group"},[a("label",[t._v("CSS klasser")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.block.data.class,expression:"block.data.class"}],staticClass:"form-control",attrs:{type:"input"},domProps:{value:t.block.data.class},on:{input:function(e){e.target.composing||t.$set(t.block.data,"class",e.target.value)}}})]):t._e()])],2)},Et=[],Nt=/(?:http[s]?:\/\/)?(?:www.)?vimeo.com\/(.+)/,Dt=/(?:youtube(?:-nocookie)?\.com\/(?:[^/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})\W/,Rt={name:"image-block",components:{Block:U},data:function(){return{customClass:"",uid:null,showConfig:!1,url:"",html:"",providers:{vimeo:{regex:Nt,html:['<iframe src="{{protocol}}//player.vimeo.com/video/{{remote_id}}?title=0&byline=0" ','width="580" height="320" frameborder="0"></iframe>'].join("\n")},youtube:{regex:Dt,html:['<iframe src="{{protocol}}//www.youtube.com/embed/{{remote_id}}" ','width="580" height="320" frameborder="0" allowfullscreen></iframe>'].join("\n")}}}},props:{block:{type:Object,default:function(){}},parent:{type:String,default:null}},created:function(){console.debug("<VideoBlock /> created"),this.block.data.remote_id?this.html=this.providers[this.block.data.source].html.replace("{{protocol}}",window.location.protocol).replace("{{remote_id}}",this.block.data.remote_id):this.showConfig=!0},methods:{parseUrl:function(t){for(var e,a=t.srcElement.value,o=Object.keys(this.providers),l=0;l<o.length;l++){var n=o[l],i=this.providers[n];e=i.regex.exec(a),null!==e&&void 0!==e[1]&&(this.block.data.source=n,this.block.data.remote_id=e[1])}if(!{}.hasOwnProperty.call(this.providers,this.block.data.source))return!1;this.html=this.providers[this.block.data.source].html.replace("{{protocol}}",window.location.protocol).replace("{{remote_id}}",this.block.data.remote_id)}}},Lt=Rt,Mt=Object(g["a"])(Lt,Ut,Et,!1,null,null,null),qt=Mt.exports,Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{attrs:{block:t.block,parent:t.parent},on:{add:function(e){t.$emit("add",e)},delete:function(e){t.$emit("delete",e)}}},[a("ul",{staticClass:"villain-timeline"},t._l(t.block.data,function(e){return a("li",{staticClass:"villain-timeline-item"},[a("p",{staticClass:"villain-timeline-item-date"},[t._v("\n        "+t._s(e.caption)+"\n      ")]),a("div",{staticClass:"villain-timeline-item-content"},[a("div",{staticClass:"villain-timeline-item-content-inner"},[t._v("\n          "+t._s(e.text)+"\n        ")])])])})),a("template",{slot:"config"},[t._l(t.block.data,function(e){return a("div",{staticClass:"form-group"},[a("label",[t._v("Punktoverskrift")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.caption,expression:"item.caption"}],staticClass:"form-control",attrs:{type:"input"},domProps:{value:e.caption},on:{input:function(a){a.target.composing||t.$set(e,"caption",a.target.value)}}}),a("label",[t._v("Innhold")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"item.text"}],staticClass:"form-control",attrs:{rows:"2"},domProps:{value:e.text},on:{input:function(a){a.target.composing||t.$set(e,"text",a.target.value)}}}),a("button",{staticClass:"btn btn-outline-primary btn-small mt-2",on:{click:function(a){t.deleteItem(e)}}},[t._v("\n        Slett\n      ")]),a("hr")])}),a("button",{staticClass:"btn btn-outline-primary",on:{click:t.addItem}},[t._v("\n      Legg til nytt tidslinjepunkt\n    ")])],2)],2)},Vt=[],Ft={name:"header-block",components:{Block:U},data:function(){return{customClass:"",uid:null}},props:{block:{type:Object,default:function(){}},parent:{type:String,default:null}},created:function(){console.debug("<TimelineBlock /> created")},methods:{addItem:function(){this.block.data.push({caption:"2018",text:"Innhold"})},deleteItem:function(t){var e=this.block.data.find(function(e){return e===t}),a=this.block.data.indexOf(e);this.block.data=Object(r["a"])(this.block.data.slice(0,a)).concat(Object(r["a"])(this.block.data.slice(a+1)))}}},zt=Ft,Kt=(a("QCTb"),Object(g["a"])(zt,Ht,Vt,!1,null,null,null)),At=Kt.exports,Jt={name:"columns-block",components:{Block:U,BlockContainer:te,BlockquoteBlock:R,DividerBlock:K,VillainPlus:w,ColumnsBlock:Yt,HeaderBlock:Z,ImageBlock:dt,MapBlock:bt,MarkdownBlock:yt,TextBlock:Tt,VideoBlock:qt,TimelineBlock:At},data:function(){return{columnCount:2,showConfig:!1,uid:null}},props:{block:{type:Object,default:function(){}},parent:{type:String,default:null}},created:function(){console.debug("<ColumnsBlock /> created"),this.block.data.length||(this.showConfig=!0)},methods:{updateColumns:function(){var t;switch(this.block.data=[],parseInt(this.columnCount)){case 1:t="col-md-12";break;case 2:t="col-md-6";break;case 3:t="col-md-4";break;case 4:t="col-md-3";break}for(var e=0;e<this.columnCount;e++)this.addColumn(t);this.showConfig=!1},addColumn:function(t){this.block.data.push({uid:this.createUID(),class:t,data:[]})},createUID:function(){return(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase()}}},Gt=Jt,Xt=Object(g["a"])(Gt,L,M,!1,null,null,null),Yt=Xt.exports,Zt={name:"block-container",components:{draggable:B.a,VillainPlus:w,BlockquoteBlock:R,ColumnsBlock:Yt,DividerBlock:K,HeaderBlock:Z,ImageBlock:dt,MapBlock:bt,MarkdownBlock:yt,TextBlock:Tt,VideoBlock:qt,TimelineBlock:At},props:{blocks:{type:Array,default:function(){return[]}}},computed:{cBlocks:{get:function(){return Object(r["a"])(this.blocks)},set:function(t){this.$emit("order",t)}}},data:function(){return{uid:null}},created:function(){console.debug("<BlockContainer /> created"),this.uid=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase()}},Qt=Zt,Wt=Object(g["a"])(Qt,y,x,!1,null,null,null),te=Wt.exports,ee={name:"villain-editor",components:{BlockContainer:te,VillainPlus:w,ColumnsBlock:Yt,HeaderBlock:Z,MarkdownBlock:yt,TextBlock:Tt,TimelineBlock:At},props:{json:{type:String,default:"[]"},baseURL:{type:String,default:"/admin/api/villain/"},browseURL:{type:String,default:"/admin/api/villain/browse/"},imageSeries:{type:String,default:"post"},extraHeaders:{type:Object,default:function(){}}},data:function(){return{blocks:[],showSource:!1}},computed:{src:{get:function(){var t=this,e=m()(this.blocks);return JSON.stringify(e.map(function(e){return t.stripUID(e)}),null,0)},set:function(t){this.updatedSource=t}}},provide:function(){return{vBaseURL:this.baseURL,vBrowseURL:this.browseURL,vImageSeries:this.imageSeries,vExtraHeaders:this.extraHeaders}},watch:{blocks:{handler:function(t,e){var a=this,o=m()(t);return o.length&&this.$emit("input",JSON.stringify(o.map(function(t){return a.stripUID(t)}),null,2)),t},deep:!0}},created:function(){this.json&&""!==this.json?(this.blocks=JSON.parse(this.json),this.blocks=this.addUIDs()):this.blocks=[]},methods:{updateSource:function(){this.blocks=JSON.parse(this.updatedSource),this.blocks=this.addUIDs(),this.toggleSource()},toggleSource:function(){this.showSource?this.showSource=!1:(this.showSource=!0,u()(this.$refs.tasource))},addUIDs:function(){var t=this;return Object(r["a"])(this.blocks).map(function(e){return Object(c["a"])({},e,{uid:t.createUID()})})},createUID:function(){return(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase()},stripUID:function(t){return t?(t.hasOwnProperty("uid")&&delete t.uid,t):t},addBlock:function(t){var e,a=t.block,o=t.after,l=t.parent;if(e="Columns"===a.component||"Timeline"===a.component?{type:a.component.toLowerCase(),data:Object(r["a"])(a.dataTemplate),uid:a.uid}:{type:a.component.toLowerCase(),data:Object(c["a"])({},a.dataTemplate),uid:a.uid},console.log("* adding",e),console.log("-> parent: ",l),console.log("-> after: ",o),o||l){if(l){var n=this.blocks.find(function(t){if("columns"===t.type){console.log("columns",t);for(var e=Object.keys(t.data),a=0;a<e.length;a++){var o=e[a],n=t.data[o];if(console.log("x uid",n.uid),console.log("parent",l),n.uid===l)return console.log("block is",n),n}}}),i=null;if(n){for(var s=Object.keys(n.data),d=0;d<s.length;d++){var u=s[d],p=n.data[u];p.uid===l&&(i=p)}if(o){var m=i.data.find(function(t){return t.uid===o});m||console.error('--- NO UID FOR "AFTER"-BLOCK');var f=i.data.indexOf(m);if(f+1===i.data.length)return void(i.data=Object(r["a"])(i.data).concat([e]));i.data=Object(r["a"])(i.data.slice(0,f+1)).concat([e],Object(r["a"])(i.data.slice(f+1)))}else i.data=[e].concat(Object(r["a"])(i.data))}}else if(o){var v=this.blocks.find(function(t){return t.uid===o});v||console.error('--- NO UID FOR "AFTER"-BLOCK');var b=this.blocks.indexOf(v);if(b+1===this.blocks.length)return void(this.blocks=Object(r["a"])(this.blocks).concat([e]));this.blocks=Object(r["a"])(this.blocks.slice(0,b+1)).concat([e],Object(r["a"])(this.blocks.slice(b+1)))}}else this.blocks.length?(console.debug("add to top"),this.blocks=[e].concat(Object(r["a"])(this.blocks))):(console.debug("add to bottom"),this.blocks=Object(r["a"])(this.blocks).concat([e]))},deleteBlock:function(t){var e=t.uid;console.log("deleting");var a=this.blocks.find(function(t){if("columns"===t.type){var a=!0,o=!1,l=void 0;try{for(var n,i=t.data[Symbol.iterator]();!(a=(n=i.next()).done);a=!0){var s=n.value,c=!0,d=!1,u=void 0;try{for(var p,m=s.data[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var f=p.value;if(f.uid===e){var v=s.data.indexOf(f);s.data=Object(r["a"])(s.data.slice(0,v)).concat(Object(r["a"])(s.data.slice(v+1)))}}}catch(t){d=!0,u=t}finally{try{c||null==m.return||m.return()}finally{if(d)throw u}}}}catch(t){o=!0,l=t}finally{try{a||null==i.return||i.return()}finally{if(o)throw l}}}return t.uid===e});if(a){var o=this.blocks.indexOf(a);this.blocks=Object(r["a"])(this.blocks.slice(0,o)).concat(Object(r["a"])(this.blocks.slice(o+1)))}},orderBlocks:function(t){this.blocks=Object(r["a"])(t)}}},ae=ee,oe=Object(g["a"])(ae,i,s,!1,null,null,null),le=oe.exports,ne={name:"app",components:{VillainEditor:le},data:function(){return{json:'[{"type":"text","data":{"type":"small","text":"TEXT1"}},{"type":"text","data":{"type":"small","text":"TEXT2"}}]'}},methods:{}},ie=ne,se=(a("ZL7j"),Object(g["a"])(ie,l,n,!1,null,null,null)),ce=se.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(ce)}}).$mount("#app")},X6qI:function(t,e,a){"use strict";var o=a("xLBa"),l=a.n(o);l.a},ZL7j:function(t,e,a){"use strict";var o=a("EDI0"),l=a.n(o);l.a},cF3u:function(t,e,a){},iHm9:function(t,e,a){},t8tj:function(t,e,a){"use strict";var o=a("iHm9"),l=a.n(o);l.a},xLBa:function(t,e,a){}});
//# sourceMappingURL=app.138ef924.js.map